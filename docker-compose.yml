version: "3"
services:
  tester:
    build:
      context: .
      dockerfile: ./docker/test_base/Dockerfile
    image: ota-test_base
    network_mode: bridge
    command: "python3 -m pytest ./tests"
    container_name: ota-test
    volumes:
      - ./pyproject.toml:/ota-client/pyproject.toml:ro
      - ./.flake8:/ota-client/.flake8:ro
      - ./app:/ota-client/app:ro
      - ./ota_proxy:/ota-client/ota_proxy:ro
      - ./tests:/ota-client/tests:ro
      - ./aws-iot-log-server:/ota-client/aws-iot-log-server:ro
